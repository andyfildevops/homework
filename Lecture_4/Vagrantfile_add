# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|

  vm_config = {
    box: "bento/ubuntu-24.04",
    network_type: "public_network", # під час виконання попросить обрати мережевий інерфейс, але так скрипт універсальний.
    synced_folder: "/vagrant_shared",
    provision_script: <<-SHELL
      sudo apt update
      sudo apt install -y nginx
    SHELL
  }

  (1..3).each do |i|
    config.vm.define "vm#{i}" do |vm|
      vm.vm.box = vm_config[:box]
      vm.vm.hostname = "public-webserver-#{i}"
      vm.vm.network vm_config[:network_type]
      vm.vm.synced_folder "./shared_vm#{i}", vm_config[:synced_folder]
      vm.vm.provision "shell", inline: vm_config[:provision_script]
    end
  end

end